<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>查询留言信息</title>
    <!-- 必须的 meta 标签 -->
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
    <link rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.18.2/dist/bootstrap-table.min.css">

    <script th:src="@{js/jquery-3.8.min.js}" ></script>
    <script th:src="@{js/popper.min_1.14.7.js}" ></script>
    <!--    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>-->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/bootstrap-table@1.18.2/dist/bootstrap-table.min.js"></script>
    <script src="https://lib.baomitu.com/bootstrap-table/1.13.1/locale/bootstrap-table-zh-CN.min.js"></script>
    <script th:src="@{js/click_xin.js}" ></script>
    <style>
        body{
            cursor: url("/cursor/Arrow.cur"),default;
        }
    </style>
</head>
<body>
<div class="container-fluid">
    <table id="table" data-toggle="table" data-height="900" class="table table-striped table-bordered table-hover"></table>
 	</div>
</body>
<script type="text/javascript">
    $(function () {
        GetOrderData();
    })
    function GetOrderData() {
        $("#table").bootstrapTable('destroy');//销毁表格
        $('#table').bootstrapTable({
            clickToSelect: true,//启用单击选中
            striped:true,//斑马线效果
            showRefresh:true,//刷新按钮
            showColumns:true,//可以勾选隐藏或显示特定列
            pagination: true,//启用分页
            url: "/commAll",//请求地址
            contentType: "application/x-www-form-urlencoded",//post提交必须要有
            method: 'get',//提交方式
            pageNumber: 1,     //初始化加载第一页，默认第一页
            pageSize: 100,      //每页的记录行数（*）
            pageList: [100, 200, 300, 400,500],  //可供选择的每页的行数（*）
            queryParamsType: 'limit',//传入参数类型
            queryParams: function (params) {
                return {
                    pageSize: params.limit,//每页显示多少条
                    pageNumber: params.offset / params.limit + 1//当前页码
                }
            },
            sidePagination: "server",//服务端分页
            /*responseHandler: function (res) {//自定义回传数据
                if (res.data == null) {
                    return {
                        "total": res.data,//总页数
                        "rows": res.data   //回传的数据
                    }
                }
                else {
                    return {
                        "total": res.data.total,
                        "rows": res.data.data
                    };
                }
            },*/
            columns: [
                {
                    field:'commentId',
                    title:'序号',
                    visible: true,
                    // sortable: true,
                    width: '15%'
                },
                {
                    field:'context',
                    title:'留言内容',
                    visible: true,
                    width: '15%',
                    // editable: true,
                },
                {
                    field:'createtime',
                    title:'留言时间',
                    visible: true,
                    width: '20%',
                },
                {
                    field:'userMsg.userName',
                    title:'姓名',
                    visible: true,
                    width: '15%',
                    /*formatter: function (value, row, index) {
                        if (value == 1) { return "即时订单" }
                        else if (value == 2) { return "预约订单" }
                        else { return "订单类型错误" }
                    }*/
                },
                {
                    field:'userMsg.userAddress',
                    title:'地址信息',
                    visible: true,
                    width: '15%'
                },
                {
                    field:'userMsg.userIp',
                    title:'IP',
                    visible: true,
                    width: '15%'
                },
                {
                    field:'userMsg.loginTime',
                    title:'最后登录',
                    visible: true,
                    width: '15%'
                },
                {
                    field:'userMsg.loginSum',
                    title:'登录次数',
                    visible: true,
                    width: '15%'
                }
            ]
        });
    }
</script>
</html>